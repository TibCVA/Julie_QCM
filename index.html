<!doctype html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light dark" />
  <meta name="description" content="QCM ultra rigoureux ‚Äî Annales & Actualit√©s ‚Äî Entra√Ænement, Examen, R√©visions avec SRS." />
  <meta name="theme-color" content="#2563eb" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>Julie la championne</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <noscript>
    <div class="toast bad" style="position:static; transform:none; opacity:1; margin:12px">
      L‚Äôapplication n√©cessite JavaScript.
    </div>
  </noscript>

  <header class="appbar" role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">üèÜ</div>
      <div class="title">
        <h1>Julie la championne</h1>
        <small id="subtitle">Annales 2020‚Äì2024 + Actualit√©s 2024Q4</small>
      </div>
    </div>
    <nav class="top-actions" aria-label="actions">
      <button id="btn-install" class="ghost" type="button" aria-label="Installer l‚Äôapplication">Installer</button>
    </nav>
  </header>

  <main class="container" id="main" tabindex="-1">
    <!-- KPIs -->
    <section class="kpis" aria-label="indicateurs">
      <div class="kpi">
        <div class="kpi-value" id="kpi-total">0</div>
        <div class="kpi-label">Questions</div>
      </div>
      <div class="kpi">
        <div class="kpi-value" id="kpi-due">0</div>
        <div class="kpi-label">√Ä r√©viser</div>
      </div>
      <div class="kpi">
        <div class="kpi-value" id="kpi-accuracy">‚Äî</div>
        <div class="kpi-label">Pr√©cision</div>
      </div>
      <div class="kpi">
        <div class="kpi-value" id="kpi-goal">0/0</div>
        <div class="kpi-label">Objectif jour</div>
      </div>
    </section>

    <!-- Filtres & mode -->
    <section class="card" id="filters" aria-labelledby="filters-title">
      <div class="card-header">
        <strong id="filters-title">Mode & filtres</strong>
        <div class="segmented" role="tablist" aria-label="Choix du mode">
          <button data-mode="practice" class="seg active" role="tab" aria-selected="true" type="button">Entra√Ænement</button>
          <button data-mode="exam" class="seg" role="tab" aria-selected="false" type="button">Examen</button>
          <button data-mode="review" class="seg" role="tab" aria-selected="false" type="button">R√©visions</button>
        </div>
      </div>

      <div class="grid2">
        <div>
          <label class="lbl" for="sources">Sources</label>
          <div id="sources" role="group" aria-label="S√©lection des sources"></div>
        </div>
        <div>
          <span class="lbl">Options</span>
          <div class="opts" role="group" aria-label="Options de s√©lection">
            <label><input type="checkbox" id="opt-newOnly"> Favoriser les nouvelles (jamais vues)</label>
            <label><input type="checkbox" id="opt-dueFirst" checked> Cartes dues d‚Äôabord (SRS)</label>
            <label><input type="checkbox" id="opt-shuffle" checked> Al√©atoire</label>
          </div>
        </div>
      </div>

      <div class="grid2">
        <div>
          <label class="lbl" for="goal-input">Objectif quotidien</label>
          <div class="goal">
            <button id="goal-dec" class="ghost" type="button" aria-label="Diminuer l‚Äôobjectif">‚àí</button>
            <input id="goal-input" type="number" min="1" max="500" value="20" inputmode="numeric" autocomplete="off" aria-describedby="goal-help">
            <button id="goal-inc" class="ghost" type="button" aria-label="Augmenter l‚Äôobjectif">+</button>
          </div>
          <small id="goal-help" class="muted">Suivi dans le compteur ¬´ Objectif jour ¬ª.</small>
        </div>
        <div class="right">
          <button id="btn-reset" class="danger" type="button">R√©initialiser progression</button>
        </div>
      </div>
    </section>

    <!-- Question -->
    <section class="card" id="qcard" aria-live="polite" aria-labelledby="q-title">
      <div class="q-meta">
        <span id="q-tag" class="tag">‚Äî</span>
        <span id="q-index" class="muted">‚Äî</span>
      </div>
      <div id="sessionbar" class="sessionbar hidden" aria-live="polite"></div>
      <h2 id="q-title">Question</h2>
      <p id="q-text" class="q-text">Chargement‚Ä¶</p>
      <div id="q-choices" class="choices" role="radiogroup" aria-label="Propositions de r√©ponse"></div>
      <div id="q-feedback" class="feedback hidden" role="status" aria-live="polite"></div>
      <div class="actions">
        <button id="btn-reveal" class="ghost hidden" type="button">R√©v√©ler</button>
        <button id="btn-restart" class="ghost" type="button">Recommencer</button>
        <button id="btn-next" class="primary" type="button">Suivante ‚Üµ</button>
      </div>
    </section>

    <!-- R√©sultats (fin de session) -->
    <section class="card hidden" id="results" aria-labelledby="results-title" aria-live="polite">
      <div class="card-header"><strong id="results-title">R√©sultats</strong></div>
      <p id="results-summary" class="muted"></p>
      <ol id="results-list" class="results-list"></ol>
      <div class="right">
        <button id="btn-close-results" class="ghost" type="button" aria-label="Fermer les r√©sultats">Fermer</button>
      </div>
    </section>

    <!-- Stats -->
    <section class="card" id="stats" aria-labelledby="stats-title">
      <div class="card-header"><strong id="stats-title">Statistiques</strong></div>
      <div class="grid2">
        <div>
          <ul id="by-source" class="list" aria-label="Performance par source"></ul>
        </div>
        <div>
          <canvas id="spark" width="600" height="200" aria-label="Historique des validations sur 14 jours"></canvas>
        </div>
      </div>
      <div class="muted right">
        Raccourcis : <kbd>N</kbd> suivante ‚Ä¢ <kbd>R</kbd> r√©v√©ler ‚Ä¢ <kbd>‚ê£</kbd> valider
      </div>
    </section>

    <!-- Historique -->
    <section class="card" id="history" aria-labelledby="history-title">
      <div class="card-header"><strong id="history-title">Historique des sessions</strong></div>
      <ul id="history-list" class="list" aria-live="polite"></ul>
    </section>
  </main>

  <footer class="foot">
    <div class="foot-row">
      <small>¬© 2025 ‚Äì Julie la championne ‚Ä¢ Ultra rigoureux, z√©ro invention ‚Ä¢ Offline/PWA</small>
      <button id="btn-hard-reset" class="danger outline" type="button">Rebooter l‚Äôapp</button>
    </div>
  </footer>

  <script src="app.js" defer></script>
</body>
</html>