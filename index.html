<!doctype html>
<html lang="fr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Entraînement — QCM</title>
  <link rel="stylesheet" href="styles.css" />
  <script defer src="app.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="container header-row">
      <h1 class="app-title">Entraînement — QCM</h1>

      <div class="toolbar">
        <label class="file-btn" title="Importer un fichier .json de questions">
          <input id="fileInput" type="file" accept=".json,application/json" />
          Importer .json
        </label>

        <div class="dataset-pill" id="datasetInfo" aria-live="polite">
          Dataset : Démo (10 questions)
        </div>

        <div class="theme-toggle">
          <input type="checkbox" id="themeSwitch" />
          <label for="themeSwitch" class="switch">
            <span class="switch__knob" aria-hidden="true"></span>
            <span class="switch__label">Mode sombre</span>
          </label>
        </div>
      </div>
    </div>
  </header>

  <main class="container main">
    <section class="card config" id="configCard">
      <h2>Configurer la session</h2>
      <div class="config-grid">
        <div>
          <p class="muted">Taille de la série</p>
          <div class="radio-row" role="radiogroup" aria-label="Taille de la série">
            <label class="radio">
              <input type="radio" name="seriesSize" value="20" checked />
              20 questions
            </label>
            <label class="radio">
              <input type="radio" name="seriesSize" value="50" />
              50 questions
            </label>
          </div>
        </div>

        <div class="start-col">
          <button id="startBtn" class="btn btn-primary">Démarrer la session</button>
          <div id="configHint" class="hint" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- Encadré de progression : toujours au-dessus du bloc Q/R -->
    <div id="statusBox" class="status-box" hidden>
      <strong>Entraînement</strong> — Question <span id="statusQuestionIdx">0</span>/<span id="statusTotal">0</span> — Score <span id="statusScore">0</span>/<span id="statusScoreTotal">0</span>
    </div>

    <section id="qaCard" class="card qa" hidden>
      <div id="questionText" class="question" aria-live="polite"></div>

      <div id="choices" class="choices" role="group" aria-label="Réponses proposées"></div>

      <div id="feedback" class="feedback" aria-live="polite"></div>

      <div class="qa-actions">
        <button id="nextBtn" class="btn btn-primary" disabled>Question suivante</button>
      </div>
    </section>

    <section id="endCard" class="card end" hidden aria-live="polite">
      <h2>Session terminée</h2>
      <p class="lead">
        Score final : <strong><span id="finalScore">0</span>/<span id="finalTotal">0</span></strong>
      </p>
      <div class="end-actions">
        <button id="restartBtn" class="btn">Rejouer la même série</button>
        <button id="newSessionBtn" class="btn btn-primary">Nouvelle session</button>
      </div>
    </section>

    <section id="historyCard" class="card history">
      <div class="history-head">
        <h2>Historique des sessions</h2>
        <button id="clearHistoryBtn" class="btn btn-quiet">Effacer l’historique</button>
      </div>
      <div id="historyList" class="history-list empty">
        <p class="muted">Aucune session enregistrée pour le moment.</p>
      </div>
    </section>
  </main>

  <footer class="container footer">
    <p class="muted">Astuce : importez votre fichier <code>.json</code> de questions (même format qu’avant). Les sessions et le thème sont mémorisés sur cet appareil.</p>
  </footer>
</body>
</html>